<HTML>
<HEAD>
<TITLE>Listing of game.c</TITLE>
<LINK rel=stylesheet href="udf_styles.css" type="text/css">
</HEAD>
<BODY>
<table class="">
<tr><td><code><i>     1</i> </code></td><td><code>&nbsp /*&nbsp ***************************************************************************</code></td></tr>
<tr><td><code><i>     2</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp&nbsp&nbsp game.c</code></td></tr>
<tr><td><code><i>     3</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     4</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Project&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     5</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Target&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     6</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Description&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     7</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     8</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     9</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Compiler&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp HI-TECH&nbsp C&nbsp&nbsp Version&nbsp 9.80</code></td></tr>
<tr><td><code><i>    10</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp IDE&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp MPLABX&nbsp v1.80</code></td></tr>
<tr><td><code><i>    11</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Created&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp September&nbsp 10,&nbsp 2013</code></td></tr>
<tr><td><code><i>    12</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>    13</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp R&nbsp Hanlen&nbsp&lsaquo  implod@gmail.com&rsaquo  </code></td></tr>
<tr><td><code><i>    14</i> </code></td><td><code>&nbsp &nbsp **&nbsp ***************************************************************************/</code></td></tr>
<tr><td><code><i>    15</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    16</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    17</i> </code></td><td><code>&nbsp &nbsp **HEADER&nbsp FILES</code></td></tr>
<tr><td><code><i>    18</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    19</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    20</i> </code></td><td><code>&nbsp //Compiler-Standard</code></td></tr>
<tr><td><code><i>    21</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  htc.h&rsaquo  </code></td></tr>
<tr><td><code><i>    22</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  stdint.h&rsaquo &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*&nbsp For&nbsp uint8_t&nbsp definition&nbsp */</code></td></tr>
<tr><td><code><i>    23</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  stdbool.h&rsaquo &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*&nbsp For&nbsp true/false&nbsp definition&nbsp */</code></td></tr>
<tr><td><code><i>    24</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  string.h&rsaquo  </code></td></tr>
<tr><td><code><i>    25</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    26</i> </code></td><td><code>&nbsp //Project</code></td></tr>
<tr><td><code><i>    27</i> </code></td><td><code>&nbsp #include&nbsp "global.h"</code></td></tr>
<tr><td><code><i>    28</i> </code></td><td><code>&nbsp #include&nbsp "game.h"</code></td></tr>
<tr><td><code><i>    29</i> </code></td><td><code>&nbsp #include&nbsp "delay.h"</code></td></tr>
<tr><td><code><i>    30</i> </code></td><td><code>&nbsp #include&nbsp "input.h"</code></td></tr>
<tr><td><code><i>    31</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    32</i> </code></td><td><code>&nbsp &nbsp **VARIABLES</code></td></tr>
<tr><td><code><i>    33</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    34</i> </code></td><td><code>&nbsp uint8_t&nbsp cycle_count&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    35</i> </code></td><td><code>&nbsp uint8_t&nbsp pattern_index&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    36</i> </code></td><td><code>&nbsp extern&nbsp volatile&nbsp unsigned&nbsp long&nbsp milliseconds;</code></td></tr>
<tr><td><code><i>    37</i> </code></td><td><code>&nbsp extern&nbsp volatile&nbsp unsigned&nbsp char&nbsp currentState;</code></td></tr>
<tr><td><code><i>    38</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    39</i> </code></td><td><code>&nbsp &nbsp **FUNCTIONS</code></td></tr>
<tr><td><code><i>    40</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    41</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    42</i> </code></td><td><code>&nbsp /*&nbsp Functions&nbsp that&nbsp 'read'&nbsp from&nbsp the&nbsp game&nbsp board&nbsp affect&nbsp the&nbsp 'foreground'&nbsp memory*/</code></td></tr>
<tr><td><code><i>    43</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    44</i> </code></td><td><code>&nbsp uint8_t&nbsp get_board_value(uint8_t&nbsp row,&nbsp uint8_t&nbsp col){</code></td></tr>
<tr><td><code><i>    45</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return(display.cols[&nbsp GAME_BOARD_CHAR_INDEX(row,&nbsp col)&nbsp ]</code></td></tr>
<tr><td><code><i>    46</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &&nbsp (BIT(GAME_BOARD_PIXEL_OFFSET(row,&nbsp col))))</code></td></tr>
<tr><td><code><i>    47</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&rsaquo &rsaquo &nbsp GAME_BOARD_PIXEL_OFFSET(row,&nbsp col);</code></td></tr>
<tr><td><code><i>    48</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    49</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    50</i> </code></td><td><code>&nbsp /*&nbsp Functions&nbsp that&nbsp 'write'&nbsp to&nbsp the&nbsp game&nbsp board&nbsp affect&nbsp the&nbsp 'background'&nbsp memory*/</code></td></tr>
<tr><td><code><i>    51</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    52</i> </code></td><td><code>&nbsp void&nbsp clear_board_location(uint8_t&nbsp row,&nbsp uint8_t&nbsp col){</code></td></tr>
<tr><td><code><i>    53</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp game_board[&nbsp GAME_BOARD_CHAR_INDEX(row,&nbsp col)&nbsp ]&nbsp &=</code></td></tr>
<tr><td><code><i>    54</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ~(BIT(GAME_BOARD_PIXEL_OFFSET(row,&nbsp col)));</code></td></tr>
<tr><td><code><i>    55</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    56</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    57</i> </code></td><td><code>&nbsp void&nbsp set_board_location(uint8_t&nbsp row,&nbsp uint8_t&nbsp col){</code></td></tr>
<tr><td><code><i>    58</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp game_board[&nbsp GAME_BOARD_CHAR_INDEX(row,&nbsp col)&nbsp ]&nbsp |=</code></td></tr>
<tr><td><code><i>    59</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp BIT(GAME_BOARD_PIXEL_OFFSET(row,&nbsp col));</code></td></tr>
<tr><td><code><i>    60</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    61</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    62</i> </code></td><td><code>&nbsp void&nbsp init_game(void){</code></td></tr>
<tr><td><code><i>    63</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    64</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp memset(game_board,&nbsp 0,&nbsp sizeof(game_board));</code></td></tr>
<tr><td><code><i>    65</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    66</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp glider();</code></td></tr>
<tr><td><code><i>    67</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    68</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>    69</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    70</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    71</i> </code></td><td><code>&nbsp void&nbsp game_loop(void){</code></td></tr>
<tr><td><code><i>    72</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    73</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp ZERO_BUTTON_STATES();</code></td></tr>
<tr><td><code><i>    74</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    75</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp init_game();</code></td></tr>
<tr><td><code><i>    76</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp do&nbsp {</code></td></tr>
<tr><td><code><i>    77</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (calculate_next_game_board()&nbsp ==&nbsp 0)&nbsp random_board();</code></td></tr>
<tr><td><code><i>    78</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    79</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //cycle_count++;</code></td></tr>
<tr><td><code><i>    80</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (NUM_CYCLES_UNTIL_RESTART&nbsp ==&nbsp cycle_count)&nbsp {</code></td></tr>
<tr><td><code><i>    81</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp cycle_count&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    82</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //memset(game_board,&nbsp 0,&nbsp sizeof(game_board));</code></td></tr>
<tr><td><code><i>    83</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp pattern_index&nbsp =&nbsp (pattern_index&nbsp +&nbsp 1)&nbsp %&nbsp 4;</code></td></tr>
<tr><td><code><i>    84</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    85</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp switch&nbsp (pattern_index)&nbsp {</code></td></tr>
<tr><td><code><i>    86</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    87</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 0:</code></td></tr>
<tr><td><code><i>    88</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp glider();</code></td></tr>
<tr><td><code><i>    89</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>    90</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp glider();</code></td></tr>
<tr><td><code><i>    91</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    92</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 1:</code></td></tr>
<tr><td><code><i>    93</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp block();</code></td></tr>
<tr><td><code><i>    94</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>    95</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp block();</code></td></tr>
<tr><td><code><i>    96</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    97</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 2:</code></td></tr>
<tr><td><code><i>    98</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp blinker();</code></td></tr>
<tr><td><code><i>    99</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>   100</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp blinker();</code></td></tr>
<tr><td><code><i>   101</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   102</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 3:</code></td></tr>
<tr><td><code><i>   103</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp random_board();</code></td></tr>
<tr><td><code><i>   104</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>   105</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp &nbsp &nbsp &nbsp copy_buffer();</code></td></tr>
<tr><td><code><i>   106</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   107</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   108</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   109</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp cycle_count++;</code></td></tr>
<tr><td><code><i>   110</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   111</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp swap_buffers();</code></td></tr>
<tr><td><code><i>   112</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DelayMs(200);</code></td></tr>
<tr><td><code><i>   113</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   114</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ReadButtonState();</code></td></tr>
<tr><td><code><i>   115</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   116</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if(buttonState[BUTTON_1]&nbsp ==&nbsp ON){</code></td></tr>
<tr><td><code><i>   117</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp currentState&nbsp =&nbsp TIME_NUMERICAL;</code></td></tr>
<tr><td><code><i>   118</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   119</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   120</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if(buttonState[BUTTON_0]&nbsp ==&nbsp ON){</code></td></tr>
<tr><td><code><i>   121</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp cycle_count&nbsp =&nbsp NUM_CYCLES_UNTIL_RESTART;</code></td></tr>
<tr><td><code><i>   122</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   123</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   124</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }&nbsp while(currentState&nbsp ==&nbsp GAME);</code></td></tr>
<tr><td><code><i>   125</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   126</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   127</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   128</i> </code></td><td><code>&nbsp uint8_t&nbsp calculate_next_game_board(void){</code></td></tr>
<tr><td><code><i>   129</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   130</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp alive_count&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   131</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   132</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp row&nbsp =&nbsp 0;&nbsp row&nbsp&lsaquo &nbsp NUM_DISPLAY_ROWS;&nbsp row++)&nbsp {</code></td></tr>
<tr><td><code><i>   133</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp col&nbsp =&nbsp 0;&nbsp col&nbsp&lsaquo &nbsp NUM_DISPLAY_COLUMNS;&nbsp col++)&nbsp {</code></td></tr>
<tr><td><code><i>   134</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp uint8_t&nbsp neighbors&nbsp =&nbsp get_neighbors(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   135</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp uint8_t&nbsp num_living_neighbors&nbsp =&nbsp num_ones(neighbors);</code></td></tr>
<tr><td><code><i>   136</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp uint8_t&nbsp cell_is_alive&nbsp =&nbsp get_board_value(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   137</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   138</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (cell_is_alive)&nbsp {</code></td></tr>
<tr><td><code><i>   139</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (num_living_neighbors&nbsp&lsaquo &nbsp 2&nbsp ||&nbsp num_living_neighbors&nbsp&rsaquo &nbsp 3)&nbsp {</code></td></tr>
<tr><td><code><i>   140</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp clear_board_location(row,&nbsp col);&nbsp /*&nbsp death&nbsp */</code></td></tr>
<tr><td><code><i>   141</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   142</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp col);&nbsp /*&nbsp survival&nbsp */</code></td></tr>
<tr><td><code><i>   143</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp alive_count++;</code></td></tr>
<tr><td><code><i>   144</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   145</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   146</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (num_living_neighbors&nbsp ==&nbsp 3)&nbsp {</code></td></tr>
<tr><td><code><i>   147</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp col);&nbsp /*&nbsp birth&nbsp */</code></td></tr>
<tr><td><code><i>   148</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp alive_count++;</code></td></tr>
<tr><td><code><i>   149</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   150</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp clear_board_location(row,&nbsp col);&nbsp /*&nbsp desolation&nbsp */</code></td></tr>
<tr><td><code><i>   151</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   152</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   153</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   154</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   155</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   156</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp alive_count;</code></td></tr>
<tr><td><code><i>   157</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   158</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   159</i> </code></td><td><code>&nbsp uint8_t&nbsp get_neighbors(uint8_t&nbsp row,&nbsp uint8_t&nbsp col){</code></td></tr>
<tr><td><code><i>   160</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp return_value&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   161</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp int8_t&nbsp r&nbsp =&nbsp 0,&nbsp c&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   162</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp neighbor_value&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   163</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   164</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (int8_t&nbsp rr&nbsp =&nbsp -1;&nbsp rr&nbsp&lsaquo  =&nbsp 1;&nbsp rr++)&nbsp {</code></td></tr>
<tr><td><code><i>   165</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (int8_t&nbsp cc&nbsp =&nbsp -1;&nbsp cc&nbsp&lsaquo  =&nbsp 1;&nbsp cc++)&nbsp {</code></td></tr>
<tr><td><code><i>   166</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (rr&nbsp !=&nbsp 0&nbsp ||&nbsp cc&nbsp !=&nbsp 0)&nbsp {&nbsp //&nbsp you&nbsp can't&nbsp be&nbsp your&nbsp own&nbsp neighbor</code></td></tr>
<tr><td><code><i>   167</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp r&nbsp =&nbsp row&nbsp +&nbsp rr;</code></td></tr>
<tr><td><code><i>   168</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp c&nbsp =&nbsp col&nbsp +&nbsp cc;</code></td></tr>
<tr><td><code><i>   169</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   170</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((r&nbsp&lsaquo &nbsp 0)&nbsp ||&nbsp (r&nbsp&rsaquo  =&nbsp NUM_DISPLAY_ROWS)&nbsp ||&nbsp (c&nbsp&lsaquo &nbsp 0)&nbsp ||&nbsp (c&nbsp&rsaquo  =&nbsp NUM_DISPLAY_COLUMNS))&nbsp {</code></td></tr>
<tr><td><code><i>   171</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp switch&nbsp (boundary_condition)&nbsp {</code></td></tr>
<tr><td><code><i>   172</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp WASTELAND:</code></td></tr>
<tr><td><code><i>   173</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp neighbor_value&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   174</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   175</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp PARADISE:</code></td></tr>
<tr><td><code><i>   176</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp neighbor_value&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>   177</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   178</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp TOROIDAL:</code></td></tr>
<tr><td><code><i>   179</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (r&nbsp&lsaquo &nbsp 0)&nbsp r&nbsp =&nbsp NUM_DISPLAY_ROWS&nbsp -&nbsp 1;</code></td></tr>
<tr><td><code><i>   180</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp if&nbsp (r&nbsp&rsaquo  =&nbsp NUM_DISPLAY_ROWS)&nbsp r&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   181</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (c&nbsp&lsaquo &nbsp 0)&nbsp c&nbsp =&nbsp NUM_DISPLAY_COLUMNS&nbsp -&nbsp 1;</code></td></tr>
<tr><td><code><i>   182</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp if&nbsp (c&nbsp&rsaquo  =&nbsp NUM_DISPLAY_COLUMNS)&nbsp c&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   183</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp neighbor_value&nbsp =&nbsp get_board_value(r,&nbsp c);</code></td></tr>
<tr><td><code><i>   184</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   185</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp MIRROR:</code></td></tr>
<tr><td><code><i>   186</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp neighbor_value&nbsp =&nbsp get_board_value(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   187</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   188</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   189</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   190</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp neighbor_value&nbsp =&nbsp get_board_value(r,&nbsp c);</code></td></tr>
<tr><td><code><i>   191</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   192</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   193</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp return_value&nbsp&lsaquo &lsaquo  =&nbsp 1;</code></td></tr>
<tr><td><code><i>   194</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp return_value&nbsp |=&nbsp neighbor_value;</code></td></tr>
<tr><td><code><i>   195</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   196</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   197</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   198</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   199</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp return_value;</code></td></tr>
<tr><td><code><i>   200</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   201</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   202</i> </code></td><td><code>&nbsp uint8_t&nbsp num_ones(uint8_t&nbsp v){</code></td></tr>
<tr><td><code><i>   203</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp c;&nbsp //&nbsp c&nbsp accumulates&nbsp the&nbsp total&nbsp bits&nbsp set&nbsp in&nbsp v</code></td></tr>
<tr><td><code><i>   204</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (c&nbsp =&nbsp 0;&nbsp v;&nbsp c++)&nbsp {</code></td></tr>
<tr><td><code><i>   205</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp v&nbsp &=&nbsp (v&nbsp -&nbsp 1);&nbsp //&nbsp clear&nbsp the&nbsp least&nbsp significant&nbsp bit&nbsp set</code></td></tr>
<tr><td><code><i>   206</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   207</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp c;</code></td></tr>
<tr><td><code><i>   208</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   209</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   210</i> </code></td><td><code>&nbsp void&nbsp swap_buffers(void){</code></td></tr>
<tr><td><code><i>   211</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //CURRENT_GAMEBOARD&nbsp =&nbsp PREVIOUS_GAMEBOARD;</code></td></tr>
<tr><td><code><i>   212</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp col&nbsp =&nbsp 0;&nbsp col&nbsp&lsaquo &nbsp NUM_DISPLAY_COLUMNS;&nbsp col++)&nbsp {</code></td></tr>
<tr><td><code><i>   213</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp display.cols[col]&nbsp =&nbsp game_board[col];</code></td></tr>
<tr><td><code><i>   214</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   215</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   216</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   217</i> </code></td><td><code>&nbsp /*&nbsp block&nbsp */</code></td></tr>
<tr><td><code><i>   218</i> </code></td><td><code>&nbsp void&nbsp block(){</code></td></tr>
<tr><td><code><i>   219</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(2,&nbsp 3);</code></td></tr>
<tr><td><code><i>   220</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(2,&nbsp 4);</code></td></tr>
<tr><td><code><i>   221</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(3,&nbsp 3);</code></td></tr>
<tr><td><code><i>   222</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(4,&nbsp 6);</code></td></tr>
<tr><td><code><i>   223</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(5,&nbsp 5);</code></td></tr>
<tr><td><code><i>   224</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(5,&nbsp 6);</code></td></tr>
<tr><td><code><i>   225</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   226</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   227</i> </code></td><td><code>&nbsp /*&nbsp blinker&nbsp */</code></td></tr>
<tr><td><code><i>   228</i> </code></td><td><code>&nbsp void&nbsp blinker(){</code></td></tr>
<tr><td><code><i>   229</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp row&nbsp =&nbsp milliseconds&nbsp %&nbsp (NUM_DISPLAY_ROWS);</code></td></tr>
<tr><td><code><i>   230</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp 2);</code></td></tr>
<tr><td><code><i>   231</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp 3);</code></td></tr>
<tr><td><code><i>   232</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp 4);</code></td></tr>
<tr><td><code><i>   233</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   234</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   235</i> </code></td><td><code>&nbsp /*&nbsp glider&nbsp */</code></td></tr>
<tr><td><code><i>   236</i> </code></td><td><code>&nbsp void&nbsp glider(){</code></td></tr>
<tr><td><code><i>   237</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp row&nbsp =&nbsp milliseconds&nbsp %&nbsp (NUM_DISPLAY_ROWS&nbsp -&nbsp 2);</code></td></tr>
<tr><td><code><i>   238</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp col&nbsp =&nbsp TMR0L&nbsp %&nbsp (NUM_DISPLAY_COLUMNS&nbsp -&nbsp 2);</code></td></tr>
<tr><td><code><i>   239</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row&nbsp +&nbsp 2,&nbsp col);</code></td></tr>
<tr><td><code><i>   240</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row&nbsp +&nbsp 2,&nbsp col&nbsp +&nbsp 1);</code></td></tr>
<tr><td><code><i>   241</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row&nbsp +&nbsp 2,&nbsp col&nbsp +&nbsp 2);</code></td></tr>
<tr><td><code><i>   242</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row&nbsp +&nbsp 1,&nbsp col&nbsp +&nbsp 2);</code></td></tr>
<tr><td><code><i>   243</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp col&nbsp +&nbsp 1);</code></td></tr>
<tr><td><code><i>   244</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   245</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   246</i> </code></td><td><code>&nbsp void&nbsp random_board(){</code></td></tr>
<tr><td><code><i>   247</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint16_t&nbsp result;</code></td></tr>
<tr><td><code><i>   248</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   249</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp row&nbsp =&nbsp 0;&nbsp row&nbsp&lsaquo &nbsp NUM_DISPLAY_ROWS;&nbsp row++)&nbsp {</code></td></tr>
<tr><td><code><i>   250</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp GODONE&nbsp =&nbsp SET;</code></td></tr>
<tr><td><code><i>   251</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp while(GODONE);</code></td></tr>
<tr><td><code><i>   252</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp result&nbsp =&nbsp ADRESL;</code></td></tr>
<tr><td><code><i>   253</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp result&nbsp +=&nbsp (ADRESH&nbsp&lsaquo &lsaquo &nbsp 8);</code></td></tr>
<tr><td><code><i>   254</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp result&nbsp +=&nbsp (READTIMER1());</code></td></tr>
<tr><td><code><i>   255</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp col&nbsp =&nbsp 0;&nbsp col&nbsp&lsaquo &nbsp NUM_DISPLAY_COLUMNS;&nbsp col++)&nbsp {</code></td></tr>
<tr><td><code><i>   256</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((result&nbsp&rsaquo &rsaquo &nbsp col)&nbsp &&nbsp 0x01)&nbsp {</code></td></tr>
<tr><td><code><i>   257</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   258</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   259</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp clear_board_location(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   260</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   261</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   262</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   263</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   264</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   265</i> </code></td><td><code>&nbsp void&nbsp copy_buffer(){</code></td></tr>
<tr><td><code><i>   266</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp row&nbsp =&nbsp 0;&nbsp row&nbsp&lsaquo &nbsp NUM_DISPLAY_ROWS;&nbsp row++)&nbsp {</code></td></tr>
<tr><td><code><i>   267</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (uint8_t&nbsp col&nbsp =&nbsp 0;&nbsp col&nbsp&lsaquo &nbsp NUM_DISPLAY_COLUMNS;&nbsp col++)&nbsp {</code></td></tr>
<tr><td><code><i>   268</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (get_board_value(row,&nbsp col))&nbsp {</code></td></tr>
<tr><td><code><i>   269</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp set_board_location(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   270</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp {</code></td></tr>
<tr><td><code><i>   271</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp clear_board_location(row,&nbsp col);</code></td></tr>
<tr><td><code><i>   272</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   273</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   274</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   275</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   276</i> </code></td><td><code>&nbsp </code></code></BODY>
</HTML>
