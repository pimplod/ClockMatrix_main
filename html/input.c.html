<HTML>
<HEAD>
<TITLE>Listing of input.c</TITLE>
<LINK rel=stylesheet href="udf_styles.css" type="text/css">
</HEAD>
<BODY>
<table class="">
<tr><td><code><i>     1</i> </code></td><td><code>&nbsp /*&nbsp ***************************************************************************</code></td></tr>
<tr><td><code><i>     2</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp&nbsp&nbsp input.c</code></td></tr>
<tr><td><code><i>     3</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     4</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Project&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     5</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Target&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     6</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Description&nbsp&nbsp :</code></td></tr>
<tr><td><code><i>     7</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     8</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     9</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Compiler&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp HI-TECH&nbsp C&nbsp&nbsp Version&nbsp 9.80</code></td></tr>
<tr><td><code><i>    10</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp IDE&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp MPLABX&nbsp v1.80</code></td></tr>
<tr><td><code><i>    11</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Created&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp June&nbsp 21,&nbsp 2013</code></td></tr>
<tr><td><code><i>    12</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>    13</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Master</code></td></tr>
<tr><td><code><i>    14</i> </code></td><td><code>&nbsp &nbsp **&nbsp ***************************************************************************/</code></td></tr>
<tr><td><code><i>    15</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    16</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    17</i> </code></td><td><code>&nbsp &nbsp **HEADER&nbsp FILES</code></td></tr>
<tr><td><code><i>    18</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    19</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    20</i> </code></td><td><code>&nbsp //Compiler-Standard</code></td></tr>
<tr><td><code><i>    21</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  htc.h&rsaquo  </code></td></tr>
<tr><td><code><i>    22</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  stdint.h&rsaquo &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*&nbsp For&nbsp uint8_t&nbsp definition&nbsp */</code></td></tr>
<tr><td><code><i>    23</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  string.h&rsaquo  </code></td></tr>
<tr><td><code><i>    24</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    25</i> </code></td><td><code>&nbsp //Project</code></td></tr>
<tr><td><code><i>    26</i> </code></td><td><code>&nbsp #include&nbsp "global.h"</code></td></tr>
<tr><td><code><i>    27</i> </code></td><td><code>&nbsp #include&nbsp "input.h"</code></td></tr>
<tr><td><code><i>    28</i> </code></td><td><code>&nbsp #include&nbsp "display.h"</code></td></tr>
<tr><td><code><i>    29</i> </code></td><td><code>&nbsp #include&nbsp "delay.h"</code></td></tr>
<tr><td><code><i>    30</i> </code></td><td><code>&nbsp #include&nbsp "DS1307.h"</code></td></tr>
<tr><td><code><i>    31</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    32</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    33</i> </code></td><td><code>&nbsp &nbsp **VARIABLES</code></td></tr>
<tr><td><code><i>    34</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    35</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    36</i> </code></td><td><code>&nbsp extern&nbsp volatile&nbsp unsigned&nbsp long&nbsp milliseconds;</code></td></tr>
<tr><td><code><i>    37</i> </code></td><td><code>&nbsp extern&nbsp volatile&nbsp unsigned&nbsp char&nbsp currentState;</code></td></tr>
<tr><td><code><i>    38</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    39</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    40</i> </code></td><td><code>&nbsp &nbsp **FUNCTIONS</code></td></tr>
<tr><td><code><i>    41</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    42</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    43</i> </code></td><td><code>&nbsp void&nbsp InputTime(void){</code></td></tr>
<tr><td><code><i>    44</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp daysInMonth;</code></td></tr>
<tr><td><code><i>    45</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    46</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Intro</code></td></tr>
<tr><td><code><i>    47</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    48</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp ScrollText(string_SETTIME);</code></td></tr>
<tr><td><code><i>    49</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp DelayMs(100);</code></td></tr>
<tr><td><code><i>    50</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Hour</code></td></tr>
<tr><td><code><i>    51</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.hour&nbsp =&nbsp InputNumber("HOUR",&nbsp 1,&nbsp 12);</code></td></tr>
<tr><td><code><i>    52</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Minute</code></td></tr>
<tr><td><code><i>    53</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.min&nbsp =&nbsp InputNumber("MIN",&nbsp 0,&nbsp 59);</code></td></tr>
<tr><td><code><i>    54</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Seconds&nbsp set&nbsp at&nbsp 0</code></td></tr>
<tr><td><code><i>    55</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.sec&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    56</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Year</code></td></tr>
<tr><td><code><i>    57</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.year&nbsp =&nbsp InputNumber("YEAR",&nbsp 0,&nbsp 99);</code></td></tr>
<tr><td><code><i>    58</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //Month</code></td></tr>
<tr><td><code><i>    59</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.mon&nbsp =&nbsp InputString("MON",&nbsp 1,&nbsp 12,&nbsp month_str);</code></td></tr>
<tr><td><code><i>    60</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp switch&nbsp (dateTime.mon)&nbsp {</code></td></tr>
<tr><td><code><i>    61</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 1:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    62</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    63</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 2:&nbsp daysInMonth&nbsp =&nbsp 28;</code></td></tr>
<tr><td><code><i>    64</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    65</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 3:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    66</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    67</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 4:&nbsp daysInMonth&nbsp =&nbsp 30;</code></td></tr>
<tr><td><code><i>    68</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    69</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 5:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    70</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    71</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 6:&nbsp daysInMonth&nbsp =&nbsp 30;</code></td></tr>
<tr><td><code><i>    72</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    73</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 7:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    74</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    75</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 8:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    76</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    77</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 9:&nbsp daysInMonth&nbsp =&nbsp 30;</code></td></tr>
<tr><td><code><i>    78</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    79</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 10:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    80</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    81</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 11:&nbsp daysInMonth&nbsp =&nbsp 30;</code></td></tr>
<tr><td><code><i>    82</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    83</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 12:&nbsp daysInMonth&nbsp =&nbsp 31;</code></td></tr>
<tr><td><code><i>    84</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>    85</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>    86</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    87</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp If&nbsp the&nbsp month&nbsp is&nbsp February,&nbsp check&nbsp for&nbsp leap&nbsp year</code></td></tr>
<tr><td><code><i>    88</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp if&nbsp (dateTime.mon&nbsp ==&nbsp 2&nbsp &&&nbsp (dateTime.year&nbsp %&nbsp 400&nbsp ==&nbsp 0&nbsp ||</code></td></tr>
<tr><td><code><i>    89</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp (dateTime.year&nbsp %&nbsp 4&nbsp ==&nbsp 0&nbsp &&&nbsp dateTime.year&nbsp %&nbsp 100&nbsp !=&nbsp 0)))&nbsp {</code></td></tr>
<tr><td><code><i>    90</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp daysInMonth&nbsp =&nbsp 29;</code></td></tr>
<tr><td><code><i>    91</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>    92</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Date</code></td></tr>
<tr><td><code><i>    93</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.mday&nbsp =&nbsp InputNumber("DATE",&nbsp 1,&nbsp daysInMonth);</code></td></tr>
<tr><td><code><i>    94</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Day</code></td></tr>
<tr><td><code><i>    95</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp dateTime.wday&nbsp =&nbsp InputString("DAY",&nbsp 1,&nbsp 7,&nbsp dow_str);</code></td></tr>
<tr><td><code><i>    96</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    97</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp DisplayText(0,1,string_DONE);</code></td></tr>
<tr><td><code><i>    98</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    99</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   100</i> </code></td><td><code>&nbsp uint8_t&nbsp InputNumber(const&nbsp char&nbsp *istring,&nbsp uint8_t&nbsp min,&nbsp uint8_t&nbsp max){</code></td></tr>
<tr><td><code><i>   101</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp done&nbsp =&nbsp FALSE;</code></td></tr>
<tr><td><code><i>   102</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp numberString[5];</code></td></tr>
<tr><td><code><i>   103</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp result&nbsp =&nbsp min;</code></td></tr>
<tr><td><code><i>   104</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp currentNumber&nbsp =&nbsp 0xFF;</code></td></tr>
<tr><td><code><i>   105</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   106</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp ZERO_BUTTON_STATES();</code></td></tr>
<tr><td><code><i>   107</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   108</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   109</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ClearDisplay();</code></td></tr>
<tr><td><code><i>   110</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ScrollText(istring);</code></td></tr>
<tr><td><code><i>   111</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ScrollText(string_leadIn);</code></td></tr>
<tr><td><code><i>   112</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp DisplayText(0,1,istring);</code></td></tr>
<tr><td><code><i>   113</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp DelayMs(500);</code></td></tr>
<tr><td><code><i>   114</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp while(!done)&nbsp {</code></td></tr>
<tr><td><code><i>   115</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   116</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Get&nbsp the&nbsp current&nbsp button&nbsp states&nbsp (with&nbsp on&nbsp and&nbsp off&nbsp debouncing)</code></td></tr>
<tr><td><code><i>   117</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ReadButtonState();</code></td></tr>
<tr><td><code><i>   118</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Adjust&nbsp the&nbsp result&nbsp accordingly</code></td></tr>
<tr><td><code><i>   119</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_0]&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   120</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp result++;</code></td></tr>
<tr><td><code><i>   121</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (result&nbsp&rsaquo &nbsp max)&nbsp result&nbsp =&nbsp min;</code></td></tr>
<tr><td><code><i>   122</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   123</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_2]&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   124</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (result&nbsp&rsaquo &nbsp min)&nbsp result--;</code></td></tr>
<tr><td><code><i>   125</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp result&nbsp =&nbsp max;</code></td></tr>
<tr><td><code><i>   126</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   127</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_1]&nbsp ==&nbsp ON)&nbsp done&nbsp =&nbsp TRUE;</code></td></tr>
<tr><td><code><i>   128</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   129</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //change&nbsp display&nbsp with&nbsp input</code></td></tr>
<tr><td><code><i>   130</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (currentNumber&nbsp !=&nbsp result)&nbsp {</code></td></tr>
<tr><td><code><i>   131</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp NumberToString(result,&nbsp numberString);</code></td></tr>
<tr><td><code><i>   132</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DisplayText(4,1,numberString);</code></td></tr>
<tr><td><code><i>   133</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DelayMs(500);</code></td></tr>
<tr><td><code><i>   134</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp currentNumber&nbsp =&nbsp result;</code></td></tr>
<tr><td><code><i>   135</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   136</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   137</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp result;</code></td></tr>
<tr><td><code><i>   138</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   139</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   140</i> </code></td><td><code>&nbsp uint8_t&nbsp InputString(const&nbsp char&nbsp *istring,&nbsp uint8_t&nbsp min,&nbsp uint8_t&nbsp max,&nbsp const&nbsp uint8_t&nbsp **stringArray){</code></td></tr>
<tr><td><code><i>   141</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp result&nbsp =&nbsp min;</code></td></tr>
<tr><td><code><i>   142</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint8_t&nbsp currentNumber&nbsp =&nbsp 0xFF;</code></td></tr>
<tr><td><code><i>   143</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp done&nbsp =&nbsp FALSE;</code></td></tr>
<tr><td><code><i>   144</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   145</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp ZERO_BUTTON_STATES();</code></td></tr>
<tr><td><code><i>   146</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   147</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ClearDisplay();</code></td></tr>
<tr><td><code><i>   148</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ScrollText(istring);</code></td></tr>
<tr><td><code><i>   149</i> </code></td><td><code>&nbsp //&nbsp&nbsp&nbsp&nbsp ScrollText(string_leadIn);</code></td></tr>
<tr><td><code><i>   150</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp DisplayText(0,1,istring);</code></td></tr>
<tr><td><code><i>   151</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp DelayMs(500);</code></td></tr>
<tr><td><code><i>   152</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp while(!done)&nbsp {</code></td></tr>
<tr><td><code><i>   153</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   154</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Get&nbsp the&nbsp current&nbsp button&nbsp states&nbsp (with&nbsp on&nbsp and&nbsp off&nbsp debouncing)</code></td></tr>
<tr><td><code><i>   155</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ReadButtonState();</code></td></tr>
<tr><td><code><i>   156</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Adjust&nbsp the&nbsp result&nbsp accordingly</code></td></tr>
<tr><td><code><i>   157</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_0]&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   158</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp result++;</code></td></tr>
<tr><td><code><i>   159</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (result&nbsp&rsaquo &nbsp max)&nbsp result&nbsp =&nbsp min;</code></td></tr>
<tr><td><code><i>   160</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   161</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_2]&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   162</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (result&nbsp&rsaquo &nbsp min)&nbsp result--;</code></td></tr>
<tr><td><code><i>   163</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp result&nbsp =&nbsp max;</code></td></tr>
<tr><td><code><i>   164</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   165</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_1]&nbsp ==&nbsp ON)&nbsp done&nbsp =&nbsp TRUE;</code></td></tr>
<tr><td><code><i>   166</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   167</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //change&nbsp display&nbsp with&nbsp input</code></td></tr>
<tr><td><code><i>   168</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (currentNumber&nbsp !=&nbsp result)&nbsp {</code></td></tr>
<tr><td><code><i>   169</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DisplayText(2,1,stringArray[result]);</code></td></tr>
<tr><td><code><i>   170</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DelayMs(500);</code></td></tr>
<tr><td><code><i>   171</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp currentNumber&nbsp =&nbsp result;</code></td></tr>
<tr><td><code><i>   172</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   173</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   174</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp result;</code></td></tr>
<tr><td><code><i>   175</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   176</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>   177</i> </code></td><td><code>&nbsp void&nbsp ReadButtonState(void){</code></td></tr>
<tr><td><code><i>   178</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_0]&nbsp ==&nbsp OFF&nbsp &&&nbsp BUTTON0&nbsp ==&nbsp OFF)&nbsp {</code></td></tr>
<tr><td><code><i>   179</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_LO(BUTTON0,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   180</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON0,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   181</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_0]&nbsp =&nbsp ON;</code></td></tr>
<tr><td><code><i>   182</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp if&nbsp (buttonState[BUTTON_0]&nbsp ==&nbsp ON&nbsp &&&nbsp BUTTON0&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   183</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON0,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   184</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_0]&nbsp =&nbsp OFF;</code></td></tr>
<tr><td><code><i>   185</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   186</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_2]&nbsp ==&nbsp OFF&nbsp &&&nbsp BUTTON2&nbsp ==&nbsp OFF)&nbsp {</code></td></tr>
<tr><td><code><i>   187</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_LO(BUTTON2,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   188</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON2,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   189</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_2]&nbsp =&nbsp ON;</code></td></tr>
<tr><td><code><i>   190</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp if&nbsp (buttonState[BUTTON_2]&nbsp ==&nbsp ON&nbsp &&&nbsp BUTTON2&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   191</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON2,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   192</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_2]&nbsp =&nbsp OFF;</code></td></tr>
<tr><td><code><i>   193</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   194</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp if&nbsp (buttonState[BUTTON_1]&nbsp ==&nbsp OFF&nbsp &&&nbsp BUTTON1&nbsp ==&nbsp OFF)&nbsp {</code></td></tr>
<tr><td><code><i>   195</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_LO(BUTTON1,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   196</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON1,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   197</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_1]&nbsp =&nbsp ON;</code></td></tr>
<tr><td><code><i>   198</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }&nbsp else&nbsp if&nbsp (buttonState[BUTTON_1]&nbsp ==&nbsp ON&nbsp &&&nbsp BUTTON1&nbsp ==&nbsp ON)&nbsp {</code></td></tr>
<tr><td><code><i>   199</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp DEBOUND_HI(BUTTON1,&nbsp DEBOUNCE_AMOUNT);</code></td></tr>
<tr><td><code><i>   200</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp buttonState[BUTTON_1]&nbsp =&nbsp OFF;</code></td></tr>
<tr><td><code><i>   201</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   202</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>   203</i> </code></td><td><code>&nbsp </code></code></BODY>
</HTML>
