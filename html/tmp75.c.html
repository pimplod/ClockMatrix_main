<HTML>
<HEAD>
<TITLE>Listing of tmp75.c</TITLE>
<LINK rel=stylesheet href="udf_styles.css" type="text/css">
</HEAD>
<BODY>
<table class="">
<tr><td><code><i>     1</i> </code></td><td><code>&nbsp /*&nbsp ***************************************************************************</code></td></tr>
<tr><td><code><i>     2</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp&nbsp&nbsp tmp75.c</code></td></tr>
<tr><td><code><i>     3</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     4</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Project&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp ClockMatrix_v0</code></td></tr>
<tr><td><code><i>     5</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Target&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp PIC18F14K50</code></td></tr>
<tr><td><code><i>     6</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Description&nbsp&nbsp :&nbsp Project&nbsp used&nbsp to&nbsp develop&nbsp clock&nbsp firmware.&nbsp&nbsp Tested&nbsp methods&nbsp and</code></td></tr>
<tr><td><code><i>     7</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp determined&nbsp functionality&nbsp (needed,&nbsp wanted,&nbsp and&nbsp the&nbsp possible)</code></td></tr>
<tr><td><code><i>     8</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>     9</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Compiler&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp HI-TECH&nbsp C&nbsp&nbsp Version&nbsp 9.80</code></td></tr>
<tr><td><code><i>    10</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp IDE&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp MPLABX&nbsp v1.80</code></td></tr>
<tr><td><code><i>    11</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Created&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp 5/8/2013</code></td></tr>
<tr><td><code><i>    12</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp Branched&nbsp&nbsp&nbsp&nbsp&nbsp :&nbsp 6/27/2013&nbsp --&nbsp started&nbsp v2</code></td></tr>
<tr><td><code><i>    13</i> </code></td><td><code>&nbsp &nbsp **</code></td></tr>
<tr><td><code><i>    14</i> </code></td><td><code>&nbsp &nbsp **&nbsp&nbsp R&nbsp Hanlen&nbsp&lsaquo  implod@gmail.com&rsaquo  </code></td></tr>
<tr><td><code><i>    15</i> </code></td><td><code>&nbsp &nbsp **&nbsp ***************************************************************************/</code></td></tr>
<tr><td><code><i>    16</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    17</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    18</i> </code></td><td><code>&nbsp &nbsp **HEADER&nbsp FILES</code></td></tr>
<tr><td><code><i>    19</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    20</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    21</i> </code></td><td><code>&nbsp //Compiler-Standard</code></td></tr>
<tr><td><code><i>    22</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  xc.h&rsaquo  </code></td></tr>
<tr><td><code><i>    23</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  stdint.h&rsaquo &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*&nbsp For&nbsp uint8_t&nbsp definition&nbsp */</code></td></tr>
<tr><td><code><i>    24</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  stdbool.h&rsaquo &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*&nbsp For&nbsp true/false&nbsp definition&nbsp */</code></td></tr>
<tr><td><code><i>    25</i> </code></td><td><code>&nbsp //#include&nbsp&lsaquo  string.h&rsaquo  </code></td></tr>
<tr><td><code><i>    26</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    27</i> </code></td><td><code>&nbsp //Project</code></td></tr>
<tr><td><code><i>    28</i> </code></td><td><code>&nbsp #include&nbsp "global.h"</code></td></tr>
<tr><td><code><i>    29</i> </code></td><td><code>&nbsp #include&nbsp "tmp75.h"</code></td></tr>
<tr><td><code><i>    30</i> </code></td><td><code>&nbsp #include&nbsp "swI2C.h"</code></td></tr>
<tr><td><code><i>    31</i> </code></td><td><code>&nbsp //#include&nbsp "display.h"</code></td></tr>
<tr><td><code><i>    32</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    33</i> </code></td><td><code>&nbsp &nbsp **LOCAL&nbsp FUNCTION&nbsp PROTOTYPES</code></td></tr>
<tr><td><code><i>    34</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    35</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    36</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    37</i> </code></td><td><code>&nbsp &nbsp **VARIABLES</code></td></tr>
<tr><td><code><i>    38</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    39</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    40</i> </code></td><td><code>&nbsp /*****************************************************************************</code></td></tr>
<tr><td><code><i>    41</i> </code></td><td><code>&nbsp &nbsp **FUNCTIONS</code></td></tr>
<tr><td><code><i>    42</i> </code></td><td><code>&nbsp &nbsp *****************************************************************************/</code></td></tr>
<tr><td><code><i>    43</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    44</i> </code></td><td><code>&nbsp uint8_t&nbsp LM75Init(void){</code></td></tr>
<tr><td><code><i>    45</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    46</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp if(AckPolling(LM75_ID)){</code></td></tr>
<tr><td><code><i>    47</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp return(49);</code></td></tr>
<tr><td><code><i>    48</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>    49</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    50</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp StartI2C();&nbsp //&nbsp Issue&nbsp start&nbsp signal</code></td></tr>
<tr><td><code><i>    51</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TransmitI2C(LM75_ID);&nbsp //&nbsp Device</code></td></tr>
<tr><td><code><i>    52</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TransmitI2C(LM75_TEMP_REGISTER);&nbsp //&nbsp Address</code></td></tr>
<tr><td><code><i>    53</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp StopI2C();</code></td></tr>
<tr><td><code><i>    54</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    55</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp LM75GetTemp();</code></td></tr>
<tr><td><code><i>    56</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp (48);</code></td></tr>
<tr><td><code><i>    57</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    58</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    59</i> </code></td><td><code>&nbsp void&nbsp LM75GetTemp(void){</code></td></tr>
<tr><td><code><i>    60</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    61</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp uint16_t&nbsp tempHi,tempLo;</code></td></tr>
<tr><td><code><i>    62</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    63</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Address&nbsp pointer&nbsp does&nbsp not&nbsp auto&nbsp advance&nbsp when&nbsp register&nbsp is&nbsp read.</code></td></tr>
<tr><td><code><i>    64</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp //&nbsp Re-read&nbsp temperature&nbsp without&nbsp having&nbsp to&nbsp write&nbsp address&nbsp each&nbsp iteration.</code></td></tr>
<tr><td><code><i>    65</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp StartI2C();&nbsp //&nbsp Issue&nbsp repeated&nbsp start&nbsp signal</code></td></tr>
<tr><td><code><i>    66</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TransmitI2C(0x91);&nbsp //&nbsp Device&nbsp plus&nbsp R/W=1</code></td></tr>
<tr><td><code><i>    67</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp tempHi&nbsp =&nbsp RecieveI2C(1);&nbsp //&nbsp Read&nbsp seconds&nbsp byte</code></td></tr>
<tr><td><code><i>    68</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp tempLo&nbsp =&nbsp RecieveI2C(0);</code></td></tr>
<tr><td><code><i>    69</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp StopI2C();&nbsp //&nbsp Issue&nbsp stop&nbsp signal</code></td></tr>
<tr><td><code><i>    70</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    71</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp temperature.celcsius&nbsp =&nbsp ((tempHi&nbsp&lsaquo &lsaquo &nbsp 3)+(tempLo&nbsp&rsaquo &rsaquo &nbsp 5))*125/1000;</code></td></tr>
<tr><td><code><i>    72</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp temperature.fahrenheit&nbsp =&nbsp (temperature.celcsius&nbsp *&nbsp 180/100)+32;</code></td></tr>
<tr><td><code><i>    73</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    74</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    75</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    76</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    77</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    78</i> </code></td><td><code>&nbsp </code></code></BODY>
</HTML>
